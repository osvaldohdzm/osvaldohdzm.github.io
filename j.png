Para lograr esto, necesitas hacer dos cosas:
 * Agregar una nueva Subrutina (Sub) al final de tu módulo que se encargue específicamente de buscar la etiqueta, insertar la imagen, centrarla y ajustar su tamaño.
 * Llamar a esa Subrutina dentro de tu código principal CYB003_GenerarReportesVulns justo antes de guardar el documento.
Aquí tienes los pasos detallados:
Paso 1: Agrega esta nueva Subrutina
Copia y pega este código al final de tu módulo (fuera de la Sub principal). Esta rutina maneja la lógica de buscar la etiqueta «evidencia», reemplazarla por la imagen, centrarla y ajustar el tamaño.
' -----------------------------------------------------------------------------
' Subrutina para insertar imagen, centrarla y redimensionarla
' -----------------------------------------------------------------------------
Sub InsertarImagenEnWord(wordDoc As Object, etiqueta As String, rutaImagen As String)
    Dim rng As Object
    Dim shp As Object
    
    ' Constantes de Word para Late Binding (por si no tienes activas las referencias)
    Const wdAlignParagraphCenter = 1
    Const wdInlineShapePicture = 3
    
    ' Validar si la imagen existe
    If Dir(rutaImagen) = "" Then
        ' Opcional: Si no existe la imagen, dejar un texto de aviso en rojo
        Set rng = wordDoc.Content
        If rng.Find.Execute(FindText:=etiqueta) Then
            rng.Text = "[IMAGEN NO ENCONTRADA: " & rutaImagen & "]"
            rng.Font.ColorIndex = 6 ' Rojo
        End If
        Exit Sub
    End If

    Set rng = wordDoc.Content
    ' Buscar la etiqueta (ej: <<evidencia>>)
    With rng.Find
        .Text = etiqueta
        .Execute
        
        If .Found Then
            ' Borrar el texto de la etiqueta para dejar limpio el lugar
            rng.Text = ""
            
            ' Insertar la imagen en el rango donde estaba la etiqueta
            Set shp = wordDoc.InlineShapes.AddPicture(FileName:=rutaImagen, _
                                                      LinkToFile:=False, _
                                                      SaveWithDocument:=True, _
                                                      Range:=rng)
            
            ' Configurar tamaño y alineación
            With shp
                .LockAspectRatio = -1 ' msoTrue (Mantiene proporción)
                
                ' --- AJUSTA EL TAMAÑO AQUÍ ---
                ' 300 puntos son aprox 10.5 cm. Ajusta este número según necesites.
                .Width = 350 
                
                ' Centrar la imagen
                .Range.ParagraphFormat.Alignment = wdAlignParagraphCenter
            End With
        End If
    End With
End Sub

Paso 2: Modifica tu código principal
Tienes que editar CYB003_GenerarReportesVulns. Ve a la sección Case "T?cnico" (donde abres Word) e inserta la lógica para construir la ruta completa de la imagen y llamar a la nueva rutina.
Debes insertar el código después de abrir el documento y antes de ReemplazarCampos (o justo después, pero antes de Guardar/Cerrar).
Busca esta parte en tu código y agrega lo que está entre las líneas de NUEVO CÓDIGO:
                ' ... (Tu código existente)
                Set WordDoc = WordApp.Documents.Open(archivoTemp)
                WordApp.Visible = False
                
                ' ------------------ INICIO NUEVO CÓDIGO ------------------
                Dim rutaCompletaImagen As String
                Dim nombreImagenRelativa As String
                
                ' 1. Verificamos si existe la columna "evidencia" en el diccionario
                If replaceDic.Exists("«evidencia»") Then
                    nombreImagenRelativa = replaceDic("«evidencia»")
                    
                    ' 2. Construimos la ruta completa. 
                    ' Asumo que la carpeta "media" está en la misma carpeta que este Excel.
                    ' Si no, cambia ThisWorkbook.Path por la ruta base correcta.
                    rutaCompletaImagen = ThisWorkbook.Path & "\" & nombreImagenRelativa
                    
                    ' 3. Llamamos a la subrutina para insertar la imagen
                    InsertarImagenEnWord WordDoc, "«evidencia»", rutaCompletaImagen
                    
                    ' 4. IMPORTANTE: Eliminamos la key del diccionario para que 
                    ' la función ReemplazarCampos no intente reemplazar la etiqueta 
                    ' con el texto de la ruta después de que ya pusimos la imagen.
                    replaceDic.Remove "«evidencia»"
                End If
                ' ------------------ FIN NUEVO CÓDIGO ------------------

                ReemplazarCampos WordDoc, replaceDic
                finalDocumentPath = carpetaSalida & "\" & "Informe T?cnico.docx"
                ' ... (resto de tu código)

Explicación de los ajustes:
 * Ruta Relativa: Excel te da media\insgen1.png. Word necesita saber dónde está eso exactamente. Usé ThisWorkbook.Path & "\" & ... asumiendo que la carpeta media está junto al archivo Excel donde corres la macro.
 * replaceDic.Remove: Esto es vital. Si no quitas «evidencia» del diccionario, tu siguiente función (ReemplazarCampos) podría buscar la etiqueta de nuevo o causar conflicto si la subrutina de imagen no la encontró.
 * Tamaño: En la nueva Sub, busca la línea .Width = 350. Aumenta o disminuye ese número para cambiar el tamaño de la imagen en el Word.
 * Alineación: La línea .Range.ParagraphFormat.Alignment = 1 se encarga de que quede centrada.

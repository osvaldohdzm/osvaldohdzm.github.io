example 20


PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVzIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+VHJhbnNmZXJlbmNpYSBBdWRpbyBwb3IgRmx1am8gKFN0cmVhbWluZyk8L3RpdGxlPgogICAgPHN0eWxlPgogICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogbW9ub3NwYWNlOyBiYWNrZ3JvdW5kOiAjMTExOyBjb2xvcjogIzBmMDsgcGFkZGluZzogMjBweDsgfQogICAgICAgIC5wYW5lbCB7IGJvcmRlcjogMXB4IHNvbGlkICMzMzM7IHBhZGRpbmc6IDIwcHg7IG1hcmdpbi1ib3R0b206IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYmFja2dyb3VuZDogIzFhMWExYTsgfQogICAgICAgIGJ1dHRvbiB7IGJhY2tncm91bmQ6ICMwMDQ0MDA7IGNvbG9yOiAjMGYwOyBib3JkZXI6IDFweCBzb2xpZCAjMGYwOyBwYWRkaW5nOiAxMHB4IDIwcHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsgZm9udC1zaXplOiAxLjFlbTsgfQogICAgICAgIGJ1dHRvbjpob3ZlciB7IGJhY2tncm91bmQ6ICMwMDY2MDA7IH0KICAgICAgICBidXR0b246ZGlzYWJsZWQgeyBib3JkZXItY29sb3I6ICM1NTU7IGNvbG9yOiAjNTU1OyBjdXJzb3I6IG5vdC1hbGxvd2VkOyBiYWNrZ3JvdW5kOiAjMTExOyB9CiAgICAgICAgLmJhci1jb250YWluZXIgeyB3aWR0aDogMTAwJTsgYmFja2dyb3VuZDogIzMzMzsgaGVpZ2h0OiAyMHB4OyBtYXJnaW4tdG9wOiAxMHB4OyB9CiAgICAgICAgLmJhciB7IGhlaWdodDogMTAwJTsgYmFja2dyb3VuZDogIzBmMDsgd2lkdGg6IDAlOyB0cmFuc2l0aW9uOiB3aWR0aCAwLjJzOyB9CiAgICAgICAgI2xvZ3MgeyBoZWlnaHQ6IDE1MHB4OyBvdmVyZmxvdy15OiBzY3JvbGw7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjMzMzOyBtYXJnaW4tdG9wOiAxMHB4OyBmb250LXNpemU6IDAuOGVtOyBjb2xvcjogIzg4ODsgfQogICAgICAgIC53YXJuaW5nIHsgY29sb3I6IG9yYW5nZTsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IDEwcHg7IGRpc3BsYXk6IGJsb2NrO30KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+Cgo8ZGl2IGNsYXNzPSJwYW5lbCI+CiAgICA8aDI+8J+TpCBFbWlzb3IgKFN0cmVhbWluZyk8L2gyPgogICAgPHNwYW4gY2xhc3M9Indhcm5pbmciPuKaoCBOb3RhOiAxME1CIHBvciBhdWRpbyB0b21hcsOhIG11Y2hvIHRpZW1wby4gRXN0ZSBjw7NkaWdvIG9wdGltaXphIGxhIG1lbW9yaWEsIG5vIGxhIGbDrXNpY2EgZGVsIHNvbmlkby48L3NwYW4+CiAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImZpbGVJbnB1dCI+CiAgICA8ZGl2IHN0eWxlPSJtYXJnaW46MTBweCAwOyI+VGFtYcOxbyBkZSBCbG9xdWUgKENodW5rKTogPHNwYW4gaWQ9ImNodW5rU2l6ZURpc3BsYXkiPjY0IEJ5dGVzPC9zcGFuPjwvZGl2PgogICAgPGJ1dHRvbiBpZD0iYnRuVHgiPkluaWNpYXIgVHJhbnNtaXNpw7NuIHBvciBGbHVqbzwvYnV0dG9uPgogICAgPGRpdiBjbGFzcz0iYmFyLWNvbnRhaW5lciI+PGRpdiBjbGFzcz0iYmFyIiBpZD0idHhQcm9ncmVzcyI+PC9kaXY+PC9kaXY+CjwvZGl2PgoKPGRpdiBjbGFzcz0icGFuZWwiPgogICAgPGgyPvCfk6UgUmVjZXB0b3IgKEJ1ZmZlciBEaW7DoW1pY28pPC9oMj4KICAgIDxidXR0b24gaWQ9ImJ0blJ4Ij5JbmljaWFyIEVzY3VjaGE8L2J1dHRvbj4KICAgIDxkaXYgaWQ9InJ4U3RhdHVzIj5Fc3BlcmFuZG8gc2XDsWFsLi4uPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJiYXItY29udGFpbmVyIj48ZGl2IGNsYXNzPSJiYXIiIGlkPSJyeFByb2dyZXNzIj48L2Rpdj48L2Rpdj4KICAgIDxkaXYgaWQ9ImRvd25sb2FkQXJlYSIgc3R5bGU9Im1hcmdpbi10b3A6MjBweDsiPjwvZGl2Pgo8L2Rpdj4KCjxkaXYgaWQ9ImxvZ3MiPjwvZGl2PgoKPHNjcmlwdD4KICAgIC8vIC0tLSBDT05GSUdVUkFDScOTTiBERSA0LUZTSyAoMiBiaXRzIHBvciB0b25vKSAtLS0KICAgIC8vIDAwID0gMTAwMEh6LCAwMSA9IDE1MDBIeiwgMTAgPSAyMDAwSHosIDExID0gMjUwMEh6CiAgICBjb25zdCBGUkVRUyA9IHsKICAgICAgICAiMDAiOiAxMDAwLAogICAgICAgICIwMSI6IDE1MDAsCiAgICAgICAgIjEwIjogMjAwMCwKICAgICAgICAiMTEiOiAyNTAwCiAgICB9OwogICAgY29uc3QgU1lNQk9MX0RVUkFUSU9OID0gMC4wODsgLy8gU2VndW5kb3MgcG9yIHPDrW1ib2xvIChNw6FzIGJham8gPSBtw6FzIHLDoXBpZG8gcGVybyBtw6FzIGVycm9yZXMpCiAgICBjb25zdCBDSFVOS19TSVpFID0gNjQ7IC8vIExlZW1vcyBlbCBhcmNoaXZvIGRlIDY0IGVuIDY0IGJ5dGVzIHBhcmEgbm8gc2F0dXJhciBSQU0KCiAgICBjb25zdCBsb2cgPSAobXNnKSA9PiB7CiAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ3MnKTsKICAgICAgICBkaXYuaW5uZXJIVE1MID0gYDxkaXY+JHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfSAtICR7bXNnfTwvZGl2PmAgKyBkaXYuaW5uZXJIVE1MOwogICAgfTsKCiAgICBsZXQgYXVkaW9DdHggPSBudWxsOwoKICAgIC8vIC0tLSBFTUlTT1IgT1BUSU1JWkFETyBQQVJBIE1FTU9SSUEgKEdFTkVSQURPUkVTKSAtLS0KICAgIGFzeW5jIGZ1bmN0aW9uKiBmaWxlQ2h1bmtHZW5lcmF0b3IoZmlsZSkgewogICAgICAgIGxldCBvZmZzZXQgPSAwOwogICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgCiAgICAgICAgd2hpbGUgKG9mZnNldCA8IGZpbGUuc2l6ZSkgewogICAgICAgICAgICBjb25zdCBzbGljZSA9IGZpbGUuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBDSFVOS19TSVpFKTsKICAgICAgICAgICAgeWllbGQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZSA9PiByZXNvbHZlKG5ldyBVaW50OEFycmF5KGUudGFyZ2V0LnJlc3VsdCkpOwogICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKHNsaWNlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG9mZnNldCArPSBDSFVOS19TSVpFOwogICAgICAgIH0KICAgIH0KCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuVHgnKS5vbmNsaWNrID0gYXN5bmMgKCkgPT4gewogICAgICAgIGNvbnN0IGZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUlucHV0JykuZmlsZXNbMF07CiAgICAgICAgaWYgKCFmaWxlKSByZXR1cm4gYWxlcnQoIkVsaWdlIGFyY2hpdm8iKTsKICAgICAgICAKICAgICAgICBhdWRpb0N0eCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpOwogICAgICAgIAogICAgICAgIGxvZyhgSW5pY2lhbmRvIHRyYW5zbWlzacOzbiBkZSAke2ZpbGUubmFtZX0gKCR7KGZpbGUuc2l6ZS8xMDI0LzEwMjQpLnRvRml4ZWQoMil9IE1CKWApOwogICAgICAgIGxvZygiRXN0cmF0ZWdpYTogTGVjdHVyYSBwYXJjaWFsIHBhcmEgZXZpdGFyIGNvbGFwc28gZGUgUkFNLiIpOwoKICAgICAgICBsZXQgcHJvY2Vzc2VkQnl0ZXMgPSAwOwogICAgICAgIGNvbnN0IHRvdGFsQnl0ZXMgPSBmaWxlLnNpemU7CgogICAgICAgIC8vIFRvbm8gZGUgc2luY3Jvbml6YWNpw7NuIGluaWNpYWwgKDMgc2VnIGRlIDQ0MEh6KQogICAgICAgIGF3YWl0IHBsYXlUb25lKDQ0MCwgMik7IAoKICAgICAgICAvLyBQcm9jZXNhciBhcmNoaXZvIHBlZGF6byBhIHBlZGF6bwogICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZmlsZUNodW5rR2VuZXJhdG9yKGZpbGUpKSB7CiAgICAgICAgICAgIC8vIENvbnZlcnRpciBjaHVuayAoVWludDhBcnJheSkgYSBwYXJlcyBkZSBiaXRzCiAgICAgICAgICAgIGxldCBzeW1ib2xRdWV1ZSA9IFtdOwogICAgICAgICAgICAKICAgICAgICAgICAgZm9yIChsZXQgYnl0ZSBvZiBjaHVuaykgewogICAgICAgICAgICAgICAgLy8gQ29udmVydGlyIGJ5dGUgKGVqOiAyNTUpIGEgYmluYXJpbyAoMTExMTExMTEpIHkgbHVlZ28gYSBwYXJlcyAoMTEsIDExLCAxMSwgMTEpCiAgICAgICAgICAgICAgICBjb25zdCBiaW4gPSBieXRlLnRvU3RyaW5nKDIpLnBhZFN0YXJ0KDgsICcwJyk7CiAgICAgICAgICAgICAgICBzeW1ib2xRdWV1ZS5wdXNoKGJpbi5zbGljZSgwLDIpKTsgLy8gQml0cyA3LTYKICAgICAgICAgICAgICAgIHN5bWJvbFF1ZXVlLnB1c2goYmluLnNsaWNlKDIsNCkpOyAvLyBCaXRzIDUtNAogICAgICAgICAgICAgICAgc3ltYm9sUXVldWUucHVzaChiaW4uc2xpY2UoNCw2KSk7IC8vIEJpdHMgMy0yCiAgICAgICAgICAgICAgICBzeW1ib2xRdWV1ZS5wdXNoKGJpbi5zbGljZSg2LDgpKTsgLy8gQml0cyAxLTAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gUmVwcm9kdWNpciBjb2xhIGRlIHPDrW1ib2xvcwogICAgICAgICAgICBhd2FpdCBwbGF5U3ltYm9sUXVldWUoc3ltYm9sUXVldWUpOwoKICAgICAgICAgICAgcHJvY2Vzc2VkQnl0ZXMgKz0gY2h1bmsubGVuZ3RoOwogICAgICAgICAgICBjb25zdCBwY3QgPSAocHJvY2Vzc2VkQnl0ZXMgLyB0b3RhbEJ5dGVzKSAqIDEwMDsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4UHJvZ3Jlc3MnKS5zdHlsZS53aWR0aCA9IHBjdCArICIlIjsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFBlcXVlw7FhIHBhdXNhIHBhcmEgZGVqYXIgcmVzcGlyYXIgYWwgbmF2ZWdhZG9yIChHQykKICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIDEwKSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFRvbm8gZmluYWwKICAgICAgICBhd2FpdCBwbGF5VG9uZSg4ODAsIDIpOwogICAgICAgIGxvZygiVHJhbnNtaXNpw7NuIGZpbmFsaXphZGEuIik7CiAgICB9OwoKICAgIGZ1bmN0aW9uIHBsYXlUb25lKGZyZXEsIGR1cmF0aW9uKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICBjb25zdCBvc2MgPSBhdWRpb0N0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgICAgIGNvbnN0IGdhaW4gPSBhdWRpb0N0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgICAgIG9zYy5mcmVxdWVuY3kudmFsdWUgPSBmcmVxOwogICAgICAgICAgICBvc2MuY29ubmVjdChnYWluKTsKICAgICAgICAgICAgZ2Fpbi5jb25uZWN0KGF1ZGlvQ3R4LmRlc3RpbmF0aW9uKTsKICAgICAgICAgICAgb3NjLnN0YXJ0KCk7CiAgICAgICAgICAgIG9zYy5zdG9wKGF1ZGlvQ3R4LmN1cnJlbnRUaW1lICsgZHVyYXRpb24pOwogICAgICAgICAgICBvc2Mub25lbmRlZCA9IHJlc29sdmU7CiAgICAgICAgfSk7CiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gcGxheVN5bWJvbFF1ZXVlKHN5bWJvbHMpIHsKICAgICAgICAvLyBQcm9ncmFtYXIgb3NjaWxhZG9yZXMgZW4gYmxvcXVlIHBhcmEgcHJlY2lzacOzbiBkZSBhdWRpbwogICAgICAgIGNvbnN0IG5vdyA9IGF1ZGlvQ3R4LmN1cnJlbnRUaW1lICsgMC4wNTsKICAgICAgICAKICAgICAgICBzeW1ib2xzLmZvckVhY2goKHN5bSwgaSkgPT4gewogICAgICAgICAgICBjb25zdCBvc2MgPSBhdWRpb0N0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgICAgIGNvbnN0IGdhaW4gPSBhdWRpb0N0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBvc2MuZnJlcXVlbmN5LnZhbHVlID0gRlJFUVNbc3ltXTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEVudmVsb3BlIHN1YXZlIHBhcmEgZXZpdGFyICJjbGljcyIKICAgICAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAsIG5vdyArIChpICogU1lNQk9MX0RVUkFUSU9OKSk7CiAgICAgICAgICAgIGdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgxLCBub3cgKyAoaSAqIFNZTUJPTF9EVVJBVElPTikgKyAwLjAxKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsIG5vdyArICgoaSsxKSAqIFNZTUJPTF9EVVJBVElPTikgLSAwLjAxKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIG9zYy5jb25uZWN0KGdhaW4pOwogICAgICAgICAgICBnYWluLmNvbm5lY3QoYXVkaW9DdHguZGVzdGluYXRpb24pOwogICAgICAgICAgICAKICAgICAgICAgICAgb3NjLnN0YXJ0KG5vdyArIChpICogU1lNQk9MX0RVUkFUSU9OKSk7CiAgICAgICAgICAgIG9zYy5zdG9wKG5vdyArICgoaSsxKSAqIFNZTUJPTF9EVVJBVElPTikpOwogICAgICAgIH0pOwoKICAgICAgICAvLyBFc3BlcmFyIGEgcXVlIHRlcm1pbmUgZXN0ZSBibG9xdWUKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIHN5bWJvbHMubGVuZ3RoICogU1lNQk9MX0RVUkFUSU9OICogMTAwMCkpOwogICAgfQoKCiAgICAvLyAtLS0gUkVDRVBUT1IgKEzDk0dJQ0EgU0lNUExJRklDQURBKSAtLS0KICAgIC8vIE5vdGE6IExhIHJlY2VwY2nDs24gcGVyZmVjdGEgcmVxdWllcmUgRkZUIGNvbnRpbnVhIHkgc2luY3Jvbml6YWNpw7NuIGRlIHJlbG9qIGNvbXBsZWphLgogICAgLy8gRXN0YSBwYXJ0ZSBzaW11bGEgbGEgcmVjZXBjacOzbiB5IGFjdW11bGFjacOzbiBlbiBCbG9iIHBhcmEgbm8gc2F0dXJhciBtZW1vcmlhLgogICAgCiAgICBsZXQgcmVjZWl2ZWRDaHVua3MgPSBbXTsgLy8gQXJyYXkgZGUgVWludDhBcnJheXMKICAgIAogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0blJ4Jykub25jbGljayA9IGFzeW5jICgpID0+IHsKICAgICAgICBhdWRpb0N0eCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpOwogICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgYXVkaW86IHRydWUgfSk7CiAgICAgICAgY29uc3Qgc291cmNlID0gYXVkaW9DdHguY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2Uoc3RyZWFtKTsKICAgICAgICBjb25zdCBhbmFseXNlciA9IGF1ZGlvQ3R4LmNyZWF0ZUFuYWx5c2VyKCk7CiAgICAgICAgYW5hbHlzZXIuZmZ0U2l6ZSA9IDEwMjQ7CiAgICAgICAgc291cmNlLmNvbm5lY3QoYW5hbHlzZXIpOwogICAgICAgIAogICAgICAgIGNvbnN0IGJ1ZmZlckxlbiA9IGFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50OwogICAgICAgIGNvbnN0IGRhdGFBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlckxlbik7CgogICAgICAgIGxvZygiRXNjdWNoYW5kby4uLiAoRkZUIGFjdGl2YSkiKTsKICAgICAgICAKICAgICAgICBsZXQgY3VycmVudEJ5dGVCaXRzID0gIiI7CiAgICAgICAgbGV0IGJ5dGVCdWZmZXIgPSBbXTsKICAgICAgICAKICAgICAgICAvLyBMb29wIGRlIGFuw6FsaXNpcwogICAgICAgIHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgYW5hbHlzZXIuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEoZGF0YUFycmF5KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEJ1c2NhciBwaWNvIG3DoXMgYWx0bwogICAgICAgICAgICBsZXQgbWF4VmFsID0gMDsgCiAgICAgICAgICAgIGxldCBtYXhJZHggPSAwOwogICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxidWZmZXJMZW47IGkrKyl7CiAgICAgICAgICAgICAgICBpZihkYXRhQXJyYXlbaV0gPiBtYXhWYWwpeyBtYXhWYWwgPSBkYXRhQXJyYXlbaV07IG1heElkeCA9IGk7IH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaWYobWF4VmFsID4gMTUwKSB7IC8vIFVtYnJhbCBkZSBydWlkbwogICAgICAgICAgICAgICAgY29uc3QgZnJlcSA9IG1heElkeCAqIGF1ZGlvQ3R4LnNhbXBsZVJhdGUgLyBhbmFseXNlci5mZnRTaXplOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBEZWNvZGlmaWNhciA0LUZTSwogICAgICAgICAgICAgICAgbGV0IGJpdHMgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoTWF0aC5hYnMoZnJlcSAtIEZSRVFTWyIwMCJdKSA8IDEwMCkgYml0cyA9ICIwMCI7CiAgICAgICAgICAgICAgICBlbHNlIGlmKE1hdGguYWJzKGZyZXEgLSBGUkVRU1siMDEiXSkgPCAxMDApIGJpdHMgPSAiMDEiOwogICAgICAgICAgICAgICAgZWxzZSBpZihNYXRoLmFicyhmcmVxIC0gRlJFUVNbIjEwIl0pIDwgMTAwKSBiaXRzID0gIjEwIjsKICAgICAgICAgICAgICAgIGVsc2UgaWYoTWF0aC5hYnMoZnJlcSAtIEZSRVFTWyIxMSJdKSA8IDEwMCkgYml0cyA9ICIxMSI7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIE5PVEE6IEFxdcOtIGZhbHRhIGzDs2dpY2EgZGUgIkRlYm91bmNlIiB5IHJlbG9qIHBhcmEgbm8gbGVlciBlbCBtaXNtbyBiaXQgNTAgdmVjZXMuCiAgICAgICAgICAgICAgICAvLyBFbiB1bmEgaW1wbGVtZW50YWNpw7NuIHJlYWwsIHNlIHJlcXVpZXJlIGRldGVjdGFyIENBTUJJT1MgZGUgZmFzZSBvIHNpbmNyb25pemFyIHRpZW1wby4KICAgICAgICAgICAgICAgIC8vIEVzdGEgZGVtbyBtdWVzdHJhIGxhIGVzdHJ1Y3R1cmEgZGUgbWVtb3JpYSwgbm8gZWwgRFNQIGNvbXBsZXRvLgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZihiaXRzICYmIGN1cnJlbnRCeXRlQml0cy5sZW5ndGggPCA4KSB7CiAgICAgICAgICAgICAgICAgICAgLy8gU2ltdWxhY2nDs24gc2ltcGxlOiBBZ3JlZ2Ftb3MgYml0cyBzaSBkZXRlY3RhbW9zIGFsZ28gY2xhcm8KICAgICAgICAgICAgICAgICAgICAvLyAoRW4gcHJvZHVjY2nDs24gZXN0byByZXF1aWVyZSB1biBidWZmZXIgY2lyY3VsYXIgZGUgdGllbXBvKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwgU1lNQk9MX0RVUkFUSU9OICogMTAwMCk7CiAgICB9OwoKICAgIC8vIEZ1bmNpw7NuIHBhcmEgZGVzY2FyZ2FyIG1lbW9yaWEgc2luIGNvbGFwc2FyIChCbG9iKQogICAgZnVuY3Rpb24gc2F2ZUZpbGUoKSB7CiAgICAgICAgLy8gVW5pciB0b2RvcyBsb3MgdHJvem9zIGVuIHVuIEJsb2IgZ3JhbmRlLiBFc3RvIG5vIHVzYSBSQU0gZGUgc3RyaW5nLCB1c2EgZGlzY28vc3dhcCBkZWwgbmF2ZWdhZG9yLgogICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihyZWNlaXZlZENodW5rcywgeyB0eXBlOiAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIiB9KTsKICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgIGEuZG93bmxvYWQgPSAiYXJjaGl2b19yZWNpYmlkby5iaW4iOwogICAgICAgIGEudGV4dENvbnRlbnQgPSAiRGVzY2FyZ2FyIEFyY2hpdm8gUmVjb25zdHJ1aWRvIjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bmxvYWRBcmVhJykuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgCiAgICAgICAgbG9nKCJBcmNoaXZvIGxpc3RvIHBhcmEgZGVzY2FyZ2EuIE1lbW9yaWEgbGliZXJhZGEuIik7CiAgICAgICAgLy8gTGltcGlhciBhcnJheQogICAgICAgIHJlY2VpdmVkQ2h1bmtzID0gW107CiAgICB9Cgo8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+

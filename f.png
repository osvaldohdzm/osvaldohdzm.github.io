

example14

PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVzIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+T2N1bHRhciBBcmNoaXZvcyAoTcOpdG9kbyBBcHBlbmQvQ29uY2F0ZW5hcik8L3RpdGxlPgogICAgPHN0eWxlPgogICAgICAgIDpyb290IHsgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIHNhbnMtc2VyaWY7IGJhY2tncm91bmQ6ICMyMjI7IGNvbG9yOiAjZWVlOyB9CiAgICAgICAgYm9keSB7IG1heC13aWR0aDogODAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nOiAyMHB4OyB9CiAgICAgICAgaDEgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjMDBkMmZmOyB9CiAgICAgICAgCiAgICAgICAgLmNvbnRhaW5lciB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMjBweDsgZmxleC13cmFwOiB3cmFwOyB9CiAgICAgICAgLmNhcmQgeyBiYWNrZ3JvdW5kOiAjMzMzOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGZsZXg6IDE7IG1pbi13aWR0aDogMzAwcHg7IGJvcmRlcjogMXB4IHNvbGlkICM0NDQ7IH0KICAgICAgICAKICAgICAgICBoMiB7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjNTU1OyBwYWRkaW5nLWJvdHRvbTogMTBweDsgbWFyZ2luLXRvcDogMDsgfQogICAgICAgIGxhYmVsIHsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi10b3A6IDE1cHg7IGNvbG9yOiAjYWFhOyBmb250LXNpemU6IDAuOWVtOyB9CiAgICAgICAgCiAgICAgICAgaW5wdXRbdHlwZT0iZmlsZSJdIHsgd2lkdGg6IDEwMCU7IG1hcmdpbi10b3A6IDVweDsgcGFkZGluZzogMTBweDsgYmFja2dyb3VuZDogIzIyMjsgYm9yZGVyOiAxcHggc29saWQgIzU1NTsgY29sb3I6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA0cHg7IH0KICAgICAgICAKICAgICAgICBidXR0b24geyBtYXJnaW4tdG9wOiAyMHB4OyB3aWR0aDogMTAwJTsgcGFkZGluZzogMTVweDsgYmFja2dyb3VuZDogIzAwZDJmZjsgY29sb3I6ICMwMDA7IGJvcmRlcjogbm9uZTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXNpemU6IDE2cHg7IHRyYW5zaXRpb246IDAuMnM7IH0KICAgICAgICBidXR0b246aG92ZXIgeyBiYWNrZ3JvdW5kOiAjMDBhMGM2OyB9CiAgICAgICAgYnV0dG9uOmRpc2FibGVkIHsgYmFja2dyb3VuZDogIzU1NTsgY29sb3I6ICM4ODg7IGN1cnNvcjogbm90LWFsbG93ZWQ7IH0KCiAgICAgICAgLnN0YXR1cyB7IG1hcmdpbi10b3A6IDE1cHg7IGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7IH0KICAgICAgICAuc3VjY2VzcyB7IGNvbG9yOiAjMGYwOyB9CiAgICAgICAgLmluZm8geyBjb2xvcjogIzAwZDJmZjsgfQogICAgICAgIAogICAgICAgIC5zZXBhcmF0b3Itbm90ZSB7IGZvbnQtc2l6ZTogMC44ZW07IGNvbG9yOiAjNzc3OyBtYXJnaW4tdG9wOiA1cHg7IH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CgogICAgPGgxPvCfk6YgQ29uY2F0ZW5hZG9yIGRlIEFyY2hpdm9zIChFc3RpbG8gY29weSAvYik8L2gxPgogICAgPHAgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjojYWFhOyI+T2N1bHRhIGFyY2hpdm9zIGdpZ2FudGVzIGRlbnRybyBkZSBpbcOhZ2VuZXMgc2luIGzDrW1pdGUgZGUgdGFtYcOxby48L3A+CgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIj4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgICAgICAgPGgyPvCflJIgRnVzaW9uYXIgKE9jdWx0YXIpPC9oMj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxsYWJlbD4xLiBJbWFnZW4gIkNlYm8iIChDb3ZlcikgLSBKUEcgbyBQTkc6PC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJjb3ZlckZpbGUiIGFjY2VwdD0iaW1hZ2UvanBlZywgaW1hZ2UvcG5nIj4KCiAgICAgICAgICAgIDxsYWJlbD4yLiBBcmNoaXZvIFNlY3JldG8gKEN1YWxxdWllciB0YW1hw7FvKTo8L2xhYmVsPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9InNlY3JldEZpbGUiPgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdHVzIiBpZD0ic3RhdHVzSGlkZSI+RXNwZXJhbmRvIGFyY2hpdm9zLi4uPC9kaXY+CiAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bkhpZGUiIGRpc2FibGVkPkdlbmVyYXIgSW1hZ2VuIEZhbHNhPC9idXR0b24+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICAgICAgICA8aDI+8J+UkyBTZXBhcmFyIChSZWN1cGVyYXIpPC9oMj4KICAgICAgICAgICAgPGxhYmVsPlN1YmUgbGEgaW1hZ2VuIHF1ZSBjcmVhc3RlIGFxdcOtOjwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0ic3RlZ29GaWxlIiBhY2NlcHQ9ImltYWdlLyoiPgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdHVzIiBpZD0ic3RhdHVzU2hvdyI+RXNwZXJhbmRvIGltYWdlbi4uLjwvZGl2PgogICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5TaG93IiBkaXNhYmxlZD5CdXNjYXIgeSBFeHRyYWVyIEFyY2hpdm88L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KCiAgICA8L2Rpdj4KCjxzY3JpcHQ+CiAgICAvLyAtLS0gQ09ORklHVVJBQ0nDk04gLS0tCiAgICAvLyBVc2Ftb3MgZXN0YSBjYWRlbmEgw7puaWNhIHBhcmEgc2FiZXIgZMOzbmRlIHRlcm1pbmEgbGEgaW1hZ2VuIHkgZW1waWV6YSBlbCBhcmNoaXZvLgogICAgLy8gRXMgbXV5IHBvY28gcHJvYmFibGUgcXVlIGVzdGEgY29tYmluYWNpw7NuIGV4YWN0YSBleGlzdGEgZW4gdW4gYXJjaGl2byBub3JtYWwuCiAgICBjb25zdCBTRVBBUkFUT1JfU1RSSU5HID0gInx8fHx8Pj4+Pj5TRUNSRVRfREFUQV9TVEFSVDw8PDw8fHx8fHwiOwogICAgY29uc3QgU0VQQVJBVE9SX0JZVEVTID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKFNFUEFSQVRPUl9TVFJJTkcpOwoKICAgIC8vIC0tLSBMT0dJQ0EgRlVTSU9OQVIgKEhJREUpIC0tLQogICAgY29uc3QgaW5wQ292ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY292ZXJGaWxlJyk7CiAgICBjb25zdCBpbnBTZWNyZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VjcmV0RmlsZScpOwogICAgY29uc3QgYnRuSGlkZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5IaWRlJyk7CiAgICBjb25zdCBzdGF0dXNIaWRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1c0hpZGUnKTsKCiAgICBmdW5jdGlvbiBjaGVja0hpZGVSZWFkeSgpIHsKICAgICAgICBpZihpbnBDb3Zlci5maWxlc1swXSAmJiBpbnBTZWNyZXQuZmlsZXNbMF0pIHsKICAgICAgICAgICAgYnRuSGlkZS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICBzdGF0dXNIaWRlLmlubmVyVGV4dCA9IGBMaXN0bzogJHtpbnBDb3Zlci5maWxlc1swXS5uYW1lfSArICR7aW5wU2VjcmV0LmZpbGVzWzBdLm5hbWV9YDsKICAgICAgICB9CiAgICB9CiAgICBpbnBDb3Zlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBjaGVja0hpZGVSZWFkeSk7CiAgICBpbnBTZWNyZXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY2hlY2tIaWRlUmVhZHkpOwoKICAgIGJ0bkhpZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7CiAgICAgICAgY29uc3QgY292ZXIgPSBpbnBDb3Zlci5maWxlc1swXTsKICAgICAgICBjb25zdCBzZWNyZXQgPSBpbnBTZWNyZXQuZmlsZXNbMF07CgogICAgICAgIC8vIENyZWFyIHVuIG9iamV0byBKU09OIHBlcXVlw7FvIGNvbiBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvIHNlY3JldG8gKG5vbWJyZSB5IHRpcG8pCiAgICAgICAgLy8gQWdyZWdhbW9zIHVuIHJlbGxlbm8gYWwgZmluYWwgZGVsIEpTT04gcGFyYSBhc2VndXJhcm5vcyBkZSBwb2RlciBwYXJzZWFybG8gYmllbi4KICAgICAgICBjb25zdCBtZXRhRGF0YSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgbmFtZTogc2VjcmV0Lm5hbWUsCiAgICAgICAgICAgIHR5cGU6IHNlY3JldC50eXBlLAogICAgICAgICAgICBzaXplOiBzZWNyZXQuc2l6ZQogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIC8vIENyZWFtb3MgdW4gQmxvYiBzZXBhcmFkb3IgcGFyYSBsb3MgbWV0YWRhdG9zCiAgICAgICAgY29uc3QgbWV0YUJsb2IgPSBuZXcgQmxvYihbU0VQQVJBVE9SX1NUUklORywgbWV0YURhdGEsIFNFUEFSQVRPUl9TVFJJTkddKTsKCiAgICAgICAgLy8gTGEgbWFnaWE6IENvbnN0cnVpciB1biBudWV2byBhcmNoaXZvIHNpbXBsZW1lbnRlIHBvbmllbmRvIHVubyB0cmFzIG90cm8KICAgICAgICAvLyBPcmRlbjogW0lNQUdFTl0gKyBbU0VQQVJBRE9SXSArIFtNRVRBREFUQV0gKyBbU0VQQVJBRE9SXSArIFtBUkNISVZPIFNFQ1JFVE9dCiAgICAgICAgY29uc3QgZmluYWxCbG9iID0gbmV3IEJsb2IoW2NvdmVyLCBtZXRhQmxvYiwgc2VjcmV0XSwgeyB0eXBlOiBjb3Zlci50eXBlIH0pOwoKICAgICAgICAvLyBEZXNjYXJnYXIKICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbmFsQmxvYik7CiAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgYS5kb3dubG9hZCA9ICJoaWRkZW5fIiArIGNvdmVyLm5hbWU7IC8vIE1hbnRpZW5lIGxhIGV4dGVuc2nDs24gZGUgbGEgaW1hZ2VuIChqcGcvcG5nKQogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgYS5jbGljaygpOwogICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7CiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwoKICAgICAgICBzdGF0dXNIaWRlLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz0ic3VjY2VzcyI+wqFHZW5lcmFkbyEgTGEgaW1hZ2VuIGFob3JhIHBlc2EgJHsoZmluYWxCbG9iLnNpemUgLyAxMDI0IC8gMTAyNCkudG9GaXhlZCgyKX0gTUI8L3NwYW4+YDsKICAgIH0pOwoKCiAgICAvLyAtLS0gTE9HSUNBIFNFUEFSQVIgKFNIT1cpIC0tLQogICAgY29uc3QgaW5wU3RlZ28gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RlZ29GaWxlJyk7CiAgICBjb25zdCBidG5TaG93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0blNob3cnKTsKICAgIGNvbnN0IHN0YXR1c1Nob3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzU2hvdycpOwoKICAgIGlucFN0ZWdvLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICBpZihpbnBTdGVnby5maWxlc1swXSkgewogICAgICAgICAgICBidG5TaG93LmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgIHN0YXR1c1Nob3cuaW5uZXJUZXh0ID0gIkFyY2hpdm8gY2FyZ2Fkby4gTGlzdG8gcGFyYSBhbmFsaXphci4iOwogICAgICAgIH0KICAgIH0pOwoKICAgIGJ0blNob3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgY29uc3QgZmlsZSA9IGlucFN0ZWdvLmZpbGVzWzBdOwogICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CgogICAgICAgIHN0YXR1c1Nob3cuaW5uZXJUZXh0ID0gIkxleWVuZG8gYmluYXJpb3MuLi4gKGVzdG8gcHVlZGUgdGFyZGFyIHNpIGVzIG11eSBncmFuZGUpIjsKCiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICBjb25zdCB1aW50OCA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBCdXNjYXIgZWwgc2VwYXJhZG9yLiAKICAgICAgICAgICAgLy8gQ29tbyBlbCBzZXBhcmFkb3IgYXBhcmVjZSBkb3MgdmVjZXMgKHJvZGVhbmRvIGxhIG1ldGFkYXRhKSwgYnVzY2Ftb3MgbGEgcHJpbWVyYSB5IHNlZ3VuZGEgb2N1cnJlbmNpYS4KICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGluZGljZXMgPSBmaW5kU2VwYXJhdG9ySW5kaWNlcyh1aW50OCwgU0VQQVJBVE9SX0JZVEVTKTsKCiAgICAgICAgICAgIGlmIChpbmRpY2VzLmxlbmd0aCA8IDIpIHsKICAgICAgICAgICAgICAgIHN0YXR1c1Nob3cuaW5uZXJIVE1MID0gIjxzcGFuIHN0eWxlPSdjb2xvcjpyZWQnPuKdjCBObyBzZSBlbmNvbnRyw7MgbmluZ8O6biBhcmNoaXZvIG9jdWx0byBjb24gZXN0ZSBtw6l0b2RvLjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBpbmRpY2VzWzBdIGVzIGRvbmRlIGVtcGllemEgZWwgcHJpbWVyIHNlcGFyYWRvcgogICAgICAgICAgICAvLyBpbmRpY2VzWzFdIGVzIGRvbmRlIGVtcGllemEgZWwgc2VndW5kbyBzZXBhcmFkb3IKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIDEuIEV4dHJhZXIgTWV0YWRhdGEgKGVzdMOhIGVudHJlIGVsIHByaW1lciBzZXBhcmFkb3IgeSBlbCBzZWd1bmRvKQogICAgICAgICAgICBjb25zdCBtZXRhU3RhcnQgPSBpbmRpY2VzWzBdICsgU0VQQVJBVE9SX0JZVEVTLmxlbmd0aDsKICAgICAgICAgICAgY29uc3QgbWV0YUVuZCA9IGluZGljZXNbMV07CiAgICAgICAgICAgIGNvbnN0IG1ldGFCeXRlcyA9IHVpbnQ4LnNsaWNlKG1ldGFTdGFydCwgbWV0YUVuZCk7CiAgICAgICAgICAgIGNvbnN0IG1ldGFTdHJpbmcgPSBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUobWV0YUJ5dGVzKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGxldCBmaWxlSW5mbyA9IHsgbmFtZTogImFyY2hpdm9fZGVzY29ub2NpZG8uYmluIiwgdHlwZTogImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIgfTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZpbGVJbmZvID0gSlNPTi5wYXJzZShtZXRhU3RyaW5nKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oIk5vIHNlIHB1ZG8gbGVlciBtZXRhZGF0YSwgdXNhbmRvIG5vbWJyZSBnZW7DqXJpY28iKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gMi4gRXh0cmFlciBlbCBBcmNoaXZvIFNlY3JldG8gKGVzdMOhIGRlc3B1w6lzIGRlbCBzZWd1bmRvIHNlcGFyYWRvciArIGxvbmdpdHVkIGRlbCBzZXBhcmFkb3IpCiAgICAgICAgICAgIGNvbnN0IGZpbGVTdGFydCA9IGluZGljZXNbMV0gKyBTRVBBUkFUT1JfQllURVMubGVuZ3RoOwogICAgICAgICAgICBjb25zdCBzZWNyZXRCeXRlcyA9IHVpbnQ4LnNsaWNlKGZpbGVTdGFydCk7IC8vIEhhc3RhIGVsIGZpbmFsCgogICAgICAgICAgICBpZiAoc2VjcmV0Qnl0ZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgc3RhdHVzU2hvdy5pbm5lckhUTUwgPSAiPHNwYW4gc3R5bGU9J2NvbG9yOnJlZCc+4p2MIE1ldGFkYXRhIGVuY29udHJhZGEsIHBlcm8gZWwgYXJjaGl2byBlc3TDoSB2YWPDrW8uPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyAzLiBDcmVhciBkZXNjYXJnYQogICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3NlY3JldEJ5dGVzXSwgeyB0eXBlOiBmaWxlSW5mby50eXBlIH0pOwogICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgICAgIGEuZG93bmxvYWQgPSBmaWxlSW5mby5uYW1lOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7CiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKCiAgICAgICAgICAgIHN0YXR1c1Nob3cuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPSJzdWNjZXNzIj7inIUgwqHDiXhpdG8hIFJlY3VwZXJhZG86IDxiPiR7ZmlsZUluZm8ubmFtZX08L2I+ICgkeyhzZWNyZXRCeXRlcy5sZW5ndGgvMTAyNCkudG9GaXhlZCgyKX0gS0IpPC9zcGFuPmA7CiAgICAgICAgfTsKCiAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgfSk7CgogICAgLy8gRnVuY2nDs24gYXV4aWxpYXIgb3B0aW1pemFkYSBwYXJhIGJ1c2NhciBieXRlcyBlbiB1biBidWZmZXIKICAgIGZ1bmN0aW9uIGZpbmRTZXBhcmF0b3JJbmRpY2VzKGJ1ZmZlciwgc2VwYXJhdG9yKSB7CiAgICAgICAgbGV0IGluZGljZXMgPSBbXTsKICAgICAgICAvLyBPcHRpbWl6YWNpb246IFNpIGVsIGFyY2hpdm8gZXMgZW5vcm1lLCBubyBxdWVyZW1vcyByZWNvcnJlcmxvIHRvZG8gc2kgeWEgZW5jb250cmFtb3MgbG8gcXVlIGJ1c2NhbW9zLgogICAgICAgIC8vIFBlcm8gY29tbyBuZWNlc2l0YW1vcyAyIG9jdXJyZW5jaWFzLCByZWNvcnJlbW9zLgogICAgICAgIAogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aCAtIHNlcGFyYXRvci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAvLyBDb21wcm9iYWNpw7NuIHLDoXBpZGEgZGVsIHByaW1lciBieXRlCiAgICAgICAgICAgIGlmIChidWZmZXJbaV0gPT09IHNlcGFyYXRvclswXSkgewogICAgICAgICAgICAgICAgLy8gQ29tcHJvYmFjacOzbiBjb21wbGV0YQogICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgc2VwYXJhdG9yLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlcltpICsgal0gIT09IHNlcGFyYXRvcltqXSkgewogICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICBpbmRpY2VzLnB1c2goaSk7CiAgICAgICAgICAgICAgICAgICAgLy8gU2FsdGFtb3MgbGEgbG9uZ2l0dWQgZGVsIHNlcGFyYWRvciBwYXJhIG5vIGVuY29udHJhcmxvIGRlIG51ZXZvIGRlbnRybyBkZSBzw60gbWlzbW8KICAgICAgICAgICAgICAgICAgICBpICs9IHNlcGFyYXRvci5sZW5ndGggLSAxOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFNvbG8gbmVjZXNpdGFtb3MgZW5jb250cmFyIGxvcyBwcmltZXJvcyAyIHNlcGFyYWRvcmVzIChpbmljaW8geSBmaW4gZGUgbWV0YWRhdGEpCiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGljZXMubGVuZ3RoID49IDIpIGJyZWFrOyAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gaW5kaWNlczsKICAgIH0KCjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=

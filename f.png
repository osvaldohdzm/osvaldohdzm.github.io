example 22


PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVzIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+QXVkaW9UcmFuc2ZlcjogTnVjbGVvIEVzdGFibGU8L3RpdGxlPgogICAgPHN0eWxlPgogICAgICAgIDpyb290IHsgLS1iZzogIzEyMTIxMjsgLS1zdXJmOiAjMWUxZTFlOyAtLXByaW1hcnk6ICNiYjg2ZmM7IC0tc3VjY2VzczogIzAzZGFjNjsgLS1lcnI6ICNjZjY2Nzk7IH0KICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIG1vbm9zcGFjZTsgYmFja2dyb3VuZDogdmFyKC0tYmcpOyBjb2xvcjogI2UwZTBlMDsgcGFkZGluZzogMjBweDsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQogICAgICAgIC5ncmlkIHsgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOyBnYXA6IDIwcHg7IHdpZHRoOiAxMDAlOyBtYXgtd2lkdGg6IDEwMDBweDsgfQogICAgICAgIEBtZWRpYShtYXgtd2lkdGg6IDcwMHB4KSB7IC5ncmlkIHsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7IH0gfQogICAgICAgIAogICAgICAgIC5wYW5lbCB7IGJhY2tncm91bmQ6IHZhcigtLXN1cmYpOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICMzMzM7IH0KICAgICAgICBoMiB7IG1hcmdpbi10b3A6IDA7IGNvbG9yOiB2YXIoLS1wcmltYXJ5KTsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMzMzM7IHBhZGRpbmctYm90dG9tOiAxMHB4OyB9CiAgICAgICAgCiAgICAgICAgYnV0dG9uIHsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDE1cHg7IG1hcmdpbi10b3A6IDEwcHg7IGJhY2tncm91bmQ6ICMzMzM7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBib3JkZXItcmFkaXVzOiA0cHg7IHRyYW5zaXRpb246IDAuMnM7IH0KICAgICAgICBidXR0b246aG92ZXIgeyBiYWNrZ3JvdW5kOiAjNDQ0OyB9CiAgICAgICAgYnV0dG9uLmFjdGl2ZSB7IGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnkpOyBjb2xvcjogIzAwMDsgfQogICAgICAgIAogICAgICAgIGNhbnZhcyB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMHB4OyBiYWNrZ3JvdW5kOiAjMDAwOyBtYXJnaW4tdG9wOiAxMHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IH0KICAgICAgICAKICAgICAgICAubG9nLXdpbmRvdyB7IGhlaWdodDogMTUwcHg7IG92ZXJmbG93LXk6IGF1dG87IGJhY2tncm91bmQ6ICMwMDA7IGZvbnQtc2l6ZTogMTFweDsgcGFkZGluZzogMTBweDsgY29sb3I6ICMwZjA7IGJvcmRlcjogMXB4IHNvbGlkICMzMzM7IG1hcmdpbi10b3A6IDEwcHg7IH0KICAgICAgICAuc3RhdHVzIHsgZm9udC1zaXplOiAxLjJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAxMHB4IDA7IG1pbi1oZWlnaHQ6IDEuNWVtOyB9CiAgICAgICAgCiAgICAgICAgLnByb2dyZXNzLWJhciB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwcHg7IGJhY2tncm91bmQ6ICMzMzM7IG1hcmdpbi10b3A6IDVweDsgYm9yZGVyLXJhZGl1czogNXB4OyBvdmVyZmxvdzogaGlkZGVuOyB9CiAgICAgICAgLmZpbGwgeyBoZWlnaHQ6IDEwMCU7IGJhY2tncm91bmQ6IHZhcigtLXN1Y2Nlc3MpOyB3aWR0aDogMCU7IHRyYW5zaXRpb246IHdpZHRoIDAuMXMgbGluZWFyOyB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgoKPGgxPvCflIogVHJhbnNmZXJlbmNpYSBVQVJUIFJvYnVzdGE8L2gxPgoKPGRpdiBjbGFzcz0iZ3JpZCI+CiAgICA8ZGl2IGNsYXNzPSJwYW5lbCI+CiAgICAgICAgPGgyPvCfk6EgRW1pc29yPC9oMj4KICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImZpbGVJbnB1dCI+CiAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOiAwLjhlbTsgY29sb3I6ICM4ODg7IG1hcmdpbi10b3A6IDVweCI+CiAgICAgICAgICAgIFJlY29tZW5kYWRvOiBBcmNoaXZvcyA8IDFNQiBwb3IgYXVkaW8uIDxicj4KICAgICAgICAgICAgKDEwTUIgdGFyZGFyw6EgaG9yYXMsIHBlcm8gbm8gY29sYXBzYXLDoSkuCiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic3RhdHVzIiBpZD0idHhTdGF0dXMiPkxpc3RvPC9kaXY+CiAgICAgICAgPGJ1dHRvbiBpZD0iYnRuVHgiPlRSQU5TTUlUSVI8L2J1dHRvbj4KICAgICAgICA8ZGl2IGNsYXNzPSJsb2ctd2luZG93IiBpZD0idHhMb2ciPjwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0icGFuZWwiPgogICAgICAgIDxoMj7wn46nIFJlY2VwdG9yPC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0dXMiIGlkPSJyeFN0YXR1cyI+SW5hY3Rpdm88L2Rpdj4KICAgICAgICA8YnV0dG9uIGlkPSJidG5SeCI+QUNUSVZBUiBFU0NVQ0hBPC9idXR0b24+CiAgICAgICAgPGNhbnZhcyBpZD0idmlzdWFsaXplciI+PC9jYW52YXM+CiAgICAgICAgCiAgICAgICAgPGRpdiBpZD0iZmlsZUluZm8iIHN0eWxlPSJtYXJnaW4tdG9wOjEwcHg7IGRpc3BsYXk6bm9uZTsgYmFja2dyb3VuZDojMmEyYTJhOyBwYWRkaW5nOjEwcHg7Ij4KICAgICAgICAgICAgPHN0cm9uZz5BcmNoaXZvOjwvc3Ryb25nPiA8c3BhbiBpZD0ibGJsRmlsZU5hbWUiPi4uLjwvc3Bhbj48YnI+CiAgICAgICAgICAgIDxzdHJvbmc+VGFtYcOxbzo8L3N0cm9uZz4gPHNwYW4gaWQ9ImxibEZpbGVTaXplIj4wPC9zcGFuPiBieXRlcwogICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgIDxkaXYgY2xhc3M9InByb2dyZXNzLWJhciI+PGRpdiBjbGFzcz0iZmlsbCIgaWQ9InJ4QmFyIj48L2Rpdj48L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJkb3dubG9hZEFyZWEiIHN0eWxlPSJtYXJnaW4tdG9wOiAxNXB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJsb2ctd2luZG93IiBpZD0icnhMb2ciPjwvZGl2PgogICAgPC9kaXY+CjwvZGl2PgoKPHNjcmlwdD4KICAgIC8vIC0tLSBDT05GSUdVUkFDScOTTiAiVUFSVCIgKEVzdGlsbyBQdWVydG8gU2VyaWUpIC0tLQogICAgLy8gVXNhbW9zIDIgZnJlY3VlbmNpYXMgRlNLLCBwZXJvIGNvbiBiaXRzIGRlIFN0YXJ0L1N0b3AgcGFyYSByZXNpbmNyb25pemFyIGVuIGNhZGEgYnl0ZS4KICAgIGNvbnN0IENGRyA9IHsKICAgICAgICBiYXVkOiAzMCwgICAgICAgICAgLy8gVmVsb2NpZGFkIChCaXRzL3NlZykuIEJhamFyIGEgMjAgc2kgaGF5IGVycm9yZXMsIHN1YmlyIGEgNTAgc2kgaGF5IGJ1ZW5hIHNlw7FhbC4KICAgICAgICBmcmVxX2xvdzogMTUwMCwgICAgLy8gQml0IDAKICAgICAgICBmcmVxX2hpZ2g6IDI1MDAsICAgLy8gQml0IDEgKHkgZXN0YWRvIElkbGUpCiAgICAgICAgc2FtcGxlUmF0ZTogNDQxMDAKICAgIH07CiAgICAKICAgIC8vIC0tLSBVVElMSURBREVTIC0tLQogICAgY29uc3QgbG9nID0gKGlkLCBtc2cpID0+IHsKICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKICAgICAgICBlbC5pbm5lckhUTUwgKz0gYD4gJHttc2d9PGJyPmA7CiAgICAgICAgZWwuc2Nyb2xsVG9wID0gZWwuc2Nyb2xsSGVpZ2h0OwogICAgfTsKCiAgICAvLyAtLS0gVFJBTlNNSVNPUiAoVFgpIC0tLQogICAgbGV0IHR4Q3R4ID0gbnVsbDsKICAgIAogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0blR4Jykub25jbGljayA9IGFzeW5jICgpID0+IHsKICAgICAgICBjb25zdCBmaWxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUlucHV0Jyk7CiAgICAgICAgaWYgKCFmaWxlSW5wdXQuZmlsZXMubGVuZ3RoKSByZXR1cm4gYWxlcnQoIlNlbGVjY2lvbmEgdW4gYXJjaGl2byBwcmltZXJvLiIpOwogICAgICAgIAogICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlSW5wdXQuZmlsZXNbMF07CiAgICAgICAgdHhDdHggPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKTsKICAgICAgICAKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHhTdGF0dXMnKS5pbm5lclRleHQgPSAiR2VuZXJhbmRvIEF1ZGlvLi4uIjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuVHgnKS5kaXNhYmxlZCA9IHRydWU7CgogICAgICAgIC8vIDEuIFByZXBhcmFyIENhYmVjZXJhOiBbTk9NQlJFXXxbVEFNQcORT118CiAgICAgICAgLy8gVXNhbW9zIGNhcmFjdGVyZXMgc2ltcGxlcyBwYXJhIGV2aXRhciBwcm9ibGVtYXMgZGUgZW5jb2RpbmcKICAgICAgICBjb25zdCBoZWFkZXJTdHIgPSBgJHtmaWxlLm5hbWV9fCR7ZmlsZS5zaXplfXxgOwogICAgICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTsKICAgICAgICBjb25zdCBoZWFkZXJCeXRlcyA9IGVuY29kZXIuZW5jb2RlKGhlYWRlclN0cik7CiAgICAgICAgCiAgICAgICAgLy8gMi4gTGVlciBhcmNoaXZvIGEgbWVtb3JpYSAoQXJyYXlCdWZmZXIsIE5PIFN0cmluZyBwYXJhIGV2aXRhciBjcmFzaCkKICAgICAgICBjb25zdCBmaWxlQnVmZmVyID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpOwogICAgICAgIGNvbnN0IGZpbGVCeXRlcyA9IG5ldyBVaW50OEFycmF5KGZpbGVCdWZmZXIpOwoKICAgICAgICBsb2coJ3R4TG9nJywgYEFyY2hpdm8gY2FyZ2FkbzogJHtmaWxlLnNpemV9IGJ5dGVzLmApOwogICAgICAgIGxvZygndHhMb2cnLCBgQ2FiZWNlcmE6ICR7aGVhZGVyQnl0ZXMubGVuZ3RofSBieXRlcy5gKTsKCiAgICAgICAgLy8gMy4gU2VjdWVuY2lhIGRlIFRyYW5zbWlzacOzbgogICAgICAgIC8vIFRvbm8gUGlsb3RvICgycykgLT4gQ2FiZWNlcmEgLT4gUGF1c2EoMC41cykgLT4gQ3VlcnBvIC0+IFRvbm8gRmluYWwKICAgICAgICAKICAgICAgICBsb2coJ3R4TG9nJywgIkVtaXRpZW5kbyB0b25vIHBpbG90by4uLiIpOwogICAgICAgIGF3YWl0IHBsYXlUb25lKENGRy5mcmVxX2hpZ2gsIDIuMCk7IC8vIFRvbm8gYWx0byBzb3N0ZW5pZG8gcGFyYSBkZXNwZXJ0YXIgYWwgQUdDCiAgICAgICAgCiAgICAgICAgbG9nKCd0eExvZycsICJUcmFuc21pdGllbmRvIENhYmVjZXJhLi4uIik7CiAgICAgICAgYXdhaXQgdHJhbnNtaXRCeXRlcyhoZWFkZXJCeXRlcyk7CiAgICAgICAgCiAgICAgICAgbG9nKCd0eExvZycsICJTaW5jcm9uaXphbmRvIHBheWxvYWQuLi4iKTsKICAgICAgICBhd2FpdCBwbGF5VG9uZShDRkcuZnJlcV9oaWdoLCAwLjUpOyAvLyBTZXBhcmFkb3IKICAgICAgICAKICAgICAgICBsb2coJ3R4TG9nJywgIlRyYW5zbWl0aWVuZG8gREFUT1MgKE5vIGNpZXJyZXMgbGEgcGVzdGHDsWEpLi4uIik7CiAgICAgICAgYXdhaXQgdHJhbnNtaXRCeXRlcyhmaWxlQnl0ZXMsIChwY3QpID0+IHsKICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eFN0YXR1cycpLmlubmVyVGV4dCA9IGBFbnZpYW5kbzogJHtwY3QudG9GaXhlZCgxKX0lYDsKICAgICAgICB9KTsKCiAgICAgICAgbG9nKCd0eExvZycsICJGaW4gZGUgdHJhbnNtaXNpw7NuLiIpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eFN0YXR1cycpLmlubmVyVGV4dCA9ICJDb21wbGV0YWRvIjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuVHgnKS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgIGF3YWl0IHBsYXlUb25lKENGRy5mcmVxX2xvdywgMS4wKTsgLy8gU2XDsWFsIGRlIGZpbgogICAgfTsKCiAgICAvLyBHZW5lcmFkb3IgZGUgYXVkaW8gcHJlY2lzbyBiYXNhZG8gZW4gdGllbXBvIGRlIEF1ZGlvQ29udGV4dAogICAgYXN5bmMgZnVuY3Rpb24gdHJhbnNtaXRCeXRlcyh1aW50OERhdGEsIG9uUHJvZ3Jlc3MpIHsKICAgICAgICBjb25zdCBiaXRUaW1lID0gMSAvIENGRy5iYXVkOwogICAgICAgIGNvbnN0IG9zYyA9IHR4Q3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICBjb25zdCBnYWluID0gdHhDdHguY3JlYXRlR2FpbigpOwogICAgICAgIG9zYy5jb25uZWN0KGdhaW4pOwogICAgICAgIGdhaW4uY29ubmVjdCh0eEN0eC5kZXN0aW5hdGlvbik7CiAgICAgICAgCiAgICAgICAgb3NjLnN0YXJ0KCk7CiAgICAgICAgCiAgICAgICAgbGV0IGN1cnJlbnRUaW1lID0gdHhDdHguY3VycmVudFRpbWUgKyAwLjA1OyAvLyBQZXF1ZcOxbyBidWZmZXIgaW5pY2lhbAogICAgICAgIGNvbnN0IGluaXRpYWxUaW1lID0gY3VycmVudFRpbWU7CiAgICAgICAgCiAgICAgICAgLy8gUHJvY2VzYW1vcyBwb3IgYmxvcXVlcyBwYXJhIG5vIGNvbmdlbGFyIGxhIFVJCiAgICAgICAgY29uc3QgQ0hVTksgPSAxMDA7IAogICAgICAgIAogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdWludDhEYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IGJ5dGUgPSB1aW50OERhdGFbaV07CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBQUk9UT0NPTE8gVUFSVDogCiAgICAgICAgICAgIC8vIDEuIFN0YXJ0IEJpdCAoTG93KSAtIEJhamEgbGEgbMOtbmVhIHBhcmEgYXZpc2FyIHF1ZSB2aWVuZSB1biBieXRlCiAgICAgICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoQ0ZHLmZyZXFfbG93LCBjdXJyZW50VGltZSk7CiAgICAgICAgICAgIGN1cnJlbnRUaW1lICs9IGJpdFRpbWU7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyAyLiBEYXRhIEJpdHMgKDggYml0cywgTFNCIGZpcnN0KQogICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IDg7IGIrKykgewogICAgICAgICAgICAgICAgY29uc3QgYml0ID0gKGJ5dGUgPj4gYikgJiAxOwogICAgICAgICAgICAgICAgY29uc3QgZnJlcSA9IGJpdCA/IENGRy5mcmVxX2hpZ2ggOiBDRkcuZnJlcV9sb3c7CiAgICAgICAgICAgICAgICBvc2MuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKGZyZXEsIGN1cnJlbnRUaW1lKTsKICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lICs9IGJpdFRpbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIDMuIFN0b3AgQml0IChIaWdoKSAtIFN1YmUgbGEgbMOtbmVhIHBhcmEgbWFyY2FyIGZpbiBkZSBieXRlCiAgICAgICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoQ0ZHLmZyZXFfaGlnaCwgY3VycmVudFRpbWUpOwogICAgICAgICAgICBjdXJyZW50VGltZSArPSBiaXRUaW1lOyAvLyBTdG9wIGJpdCBkdXJhdGlvbgogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQWN0dWFsaXphciBVSSB5IGVzcGVyYXIgY2FkYSBjaWVydG9zIGJ5dGVzIHBhcmEgbm8gc2F0dXJhciBlbCBwbGFuaWZpY2Fkb3IgZGUgYXVkaW8KICAgICAgICAgICAgaWYgKGkgJSBDSFVOSyA9PT0gMCkgewogICAgICAgICAgICAgICAgaWYob25Qcm9ncmVzcykgb25Qcm9ncmVzcygoaSAvIHVpbnQ4RGF0YS5sZW5ndGgpICogMTAwKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gU2kgbGEgY29sYSBkZSBhdWRpbyBlcyBtdXkgbGFyZ2EsIGVzcGVyYW1vcyB1biBwb2NvCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRpbWUgLSB0eEN0eC5jdXJyZW50VGltZSA+IDIuMCkgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCAxMDAwKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgb3NjLnN0b3AoY3VycmVudFRpbWUpOwogICAgICAgIC8vIEVzcGVyYW1vcyBhIHF1ZSB0ZXJtaW5lIGVsIGF1ZGlvIGbDrXNpY28KICAgICAgICByZXR1cm4gbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIChjdXJyZW50VGltZSAtIGluaXRpYWxUaW1lKSAqIDEwMDAgKyAyMDApKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gcGxheVRvbmUoZnJlcSwgZHVyKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHIgPT4gewogICAgICAgICAgICBjb25zdCBvID0gdHhDdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgICAgICBvLmZyZXF1ZW5jeS52YWx1ZSA9IGZyZXE7CiAgICAgICAgICAgIG8uY29ubmVjdCh0eEN0eC5kZXN0aW5hdGlvbik7CiAgICAgICAgICAgIG8uc3RhcnQoKTsKICAgICAgICAgICAgby5zdG9wKHR4Q3R4LmN1cnJlbnRUaW1lICsgZHVyKTsKICAgICAgICAgICAgc2V0VGltZW91dChyLCBkdXIgKiAxMDAwKTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLyAtLS0gUkVDRVBUT1IgKFJYKSAtLS0KICAgIGxldCByeEN0eCwgYW5hbHlzZXIsIGRhdGFBcnJheTsKICAgIGxldCBpc0xpc3RlbmluZyA9IGZhbHNlOwogICAgCiAgICAvLyBFc3RhZG8gZGVsIHJlY2VwdG9yCiAgICBsZXQgcnhTdGF0ZSA9IDA7IC8vIDA6IElkbGUsIDE6IFJlYWRpbmcgSGVhZGVyLCAyOiBSZWFkaW5nIEJvZHkKICAgIGxldCBkZXRlY3RlZE5hbWUgPSAiIjsKICAgIGxldCBkZXRlY3RlZFNpemUgPSAwOwogICAgbGV0IHJ4QnVmZmVyID0gbnVsbDsgLy8gVWludDhBcnJheSBmaW5hbAogICAgbGV0IHJ4SW5kZXggPSAwOyAgICAgLy8gUHVudGVybyBkZSBlc2NyaXR1cmEKICAgIAogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0blJ4Jykub25jbGljayA9IGFzeW5jICgpID0+IHsKICAgICAgICByeEN0eCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpOwogICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgYXVkaW86IHsgZWNob0NhbmNlbGxhdGlvbjogZmFsc2UsIG5vaXNlU3VwcHJlc3Npb246IGZhbHNlLCBhdXRvR2FpbkNvbnRyb2w6IGZhbHNlIH0gfSk7CiAgICAgICAgCiAgICAgICAgY29uc3Qgc291cmNlID0gcnhDdHguY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2Uoc3RyZWFtKTsKICAgICAgICBhbmFseXNlciA9IHJ4Q3R4LmNyZWF0ZUFuYWx5c2VyKCk7CiAgICAgICAgYW5hbHlzZXIuZmZ0U2l6ZSA9IDEwMjQ7IC8vIFJlc29sdWNpw7NuIG1lZGlhIHBhcmEgdmVsb2NpZGFkCiAgICAgICAgYW5hbHlzZXIuc21vb3RoaW5nVGltZUNvbnN0YW50ID0gMC4xOyAvLyBSZWFjY2lvbmFyIHLDoXBpZG8KICAgICAgICBzb3VyY2UuY29ubmVjdChhbmFseXNlcik7CiAgICAgICAgCiAgICAgICAgZGF0YUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQpOwogICAgICAgIGlzTGlzdGVuaW5nID0gdHJ1ZTsKICAgICAgICAKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuUngnKS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3J4U3RhdHVzJykuaW5uZXJUZXh0ID0gIkVzY3VjaGFuZG8uLi4iOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyeFN0YXR1cycpLnN0eWxlLmNvbG9yID0gIiMwZjAiOwogICAgICAgIAogICAgICAgIHN0YXJ0RGVtb2R1bGF0aW9uTG9vcCgpOwogICAgICAgIGRyYXdWaXN1YWxpemVyKCk7CiAgICB9OwoKICAgIC8vIEJ1Y2xlIGRlIGxlY3R1cmEgZGUgc2XDsWFsIChQb2xsaW5nIHByZWNpc28pCiAgICBmdW5jdGlvbiBzdGFydERlbW9kdWxhdGlvbkxvb3AoKSB7CiAgICAgICAgY29uc3QgYml0VGltZU1zID0gMTAwMCAvIENGRy5iYXVkOwogICAgICAgIGxldCBsYXN0U2FtcGxlVGltZSA9IDA7CiAgICAgICAgCiAgICAgICAgLy8gVmFyaWFibGVzIFVBUlQKICAgICAgICBsZXQgaW5CeXRlID0gZmFsc2U7CiAgICAgICAgbGV0IGJpdFN0ZXAgPSAwOyAvLyAwPVN0YXJ0LCAxLTg9Qml0cywgOT1TdG9wCiAgICAgICAgbGV0IGN1cnJlbnRCeXRlID0gMDsKICAgICAgICBsZXQgaGVhZGVyUmF3ID0gW107IC8vIEFycmF5IHRlbXBvcmFsIHBhcmEgY2FiZWNlcmEKICAgICAgICAKICAgICAgICAvLyBGdW5jacOzbiByZWN1cnNpdmEgY29uIGNvcnJlY2Npw7NuIGRlIGRlcml2YQogICAgICAgIGNvbnN0IGxvb3AgPSAodGltZXN0YW1wKSA9PiB7CiAgICAgICAgICAgIGlmICghaXNMaXN0ZW5pbmcpIHJldHVybjsKICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gTGltaXRhZG9yIGRlIHZlbG9jaWRhZCBkZSBtdWVzdHJlbyBwYXJhIHNpbXVsYXIgZWwgcmVsb2ogZGVsIEJhdWQgUmF0ZQogICAgICAgICAgICAvLyBOT1RBOiBQYXJhIHByb2R1Y2Npw7NuIHJlYWwgc2UgdXNhIERTUCBzb2JyZSBidWZmZXIgZGUgYXVkaW8gcmF3LgogICAgICAgICAgICAvLyBFc3RhIGFwcm94aW1hY2nDs24gZnVuY2lvbmEgYmllbiBwYXJhIGJhamFzIHZlbG9jaWRhZGVzICg8IDUwIGJhdWQpLgogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKHRpbWVzdGFtcCAtIGxhc3RTYW1wbGVUaW1lIDwgYml0VGltZU1zIC8gNCkgcmV0dXJuOyAvLyBPdmVyc2FtcGxpbmcgKG11ZXN0cmVhbW9zIDQgdmVjZXMgcG9yIGJpdCkKICAgICAgICAgICAgbGFzdFNhbXBsZVRpbWUgPSB0aW1lc3RhbXA7CgogICAgICAgICAgICBhbmFseXNlci5nZXRCeXRlRnJlcXVlbmN5RGF0YShkYXRhQXJyYXkpOwogICAgICAgICAgICBjb25zdCBmcmVxID0gZ2V0RG9taW5hbnRGcmVxKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBMw7NnaWNhIGRlIEJpdCAoU2NobWl0dCBUcmlnZ2VyKQogICAgICAgICAgICBsZXQgYml0VmFsID0gLTE7IC8vIC0xIEluZGV0ZXJtaW5hZG8KICAgICAgICAgICAgaWYgKGZyZXEgPiBDRkcuZnJlcV9oaWdoIC0gMzAwICYmIGZyZXEgPCBDRkcuZnJlcV9oaWdoICsgMzAwKSBiaXRWYWwgPSAxOyAvLyBIaWdoIChJZGxlLzEpCiAgICAgICAgICAgIGVsc2UgaWYgKGZyZXEgPiBDRkcuZnJlcV9sb3cgLSAzMDAgJiYgZnJlcSA8IENGRy5mcmVxX2xvdyArIDMwMCkgYml0VmFsID0gMDsgLy8gTG93ICgwL1N0YXJ0KQogICAgICAgICAgICAKICAgICAgICAgICAgLy8gTcOBUVVJTkEgREUgRVNUQURPUyBVQVJUCiAgICAgICAgICAgIAogICAgICAgICAgICAvLyAxLiBCdXNjYW5kbyBTdGFydCBCaXQgKEJhamFkYSBkZSAxIGEgMCkKICAgICAgICAgICAgaWYgKCFpbkJ5dGUpIHsKICAgICAgICAgICAgICAgIGlmIChiaXRWYWwgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAvLyBEZXRlY3RhZG8gU3RhcnQgQml0LgogICAgICAgICAgICAgICAgICAgIC8vIEVzcGVyYW1vcyAxLjUgdGllbXBvcyBkZSBiaXQgcGFyYSBtdWVzdHJlYXIgZWwgY2VudHJvIGRlbCBwcmltZXIgYml0IGRlIGRhdG9zCiAgICAgICAgICAgICAgICAgICAgaW5CeXRlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBiaXRTdGVwID0gMDsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50Qnl0ZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgLy8gRm9yemFtb3MgdW4gcmV0YXJkbyBwYXJhIGFsaW5lYXIgZmFzZSAoc2ltcGxlIGRlbGF5KQogICAgICAgICAgICAgICAgICAgIGxhc3RTYW1wbGVUaW1lICs9IGJpdFRpbWVNcyAqIDAuNTsgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBFc3RhbW9zIGRlbnRybyBkZSB1biBieXRlLiBNdWVzdHJlYXIgY2FkYSBiaXRUaW1lTXMKICAgICAgICAgICAgICAgICBpZiAodGltZXN0YW1wIC0gbGFzdFNhbXBsZVRpbWUgPj0gYml0VGltZU1zKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gSGEgcGFzYWRvIDEgdGllbXBvIGRlIGJpdAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIChiaXRTdGVwIDwgOCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBMZXllbmRvIGRhdG9zIChMU0IgZmlyc3QpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRWYWwgPT09IDEpIGN1cnJlbnRCeXRlIHw9ICgxIDw8IGJpdFN0ZXApOwogICAgICAgICAgICAgICAgICAgICAgICBiaXRTdGVwKys7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RvcCBCaXQKICAgICAgICAgICAgICAgICAgICAgICAgaW5CeXRlID0gZmFsc2U7IC8vIFJlc2V0IHBhcmEgc2lndWllbnRlIGJ5dGUKICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0J5dGUoY3VycmVudEJ5dGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyBSZXNldGVhciB0aW1lciBwYXJhIG1hbnRlbmVyIHNpbmNyb27DrWEgcmVsYXRpdmEKICAgICAgICAgICAgICAgICAgICAvLyBsYXN0U2FtcGxlVGltZSBzZSBhY3R1YWxpemEgYXJyaWJhCiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7CiAgICB9CiAgICAKICAgIC8vIFByb2Nlc2EgY2FkYSBieXRlIGxpbXBpbyBxdWUgbGxlZ2EKICAgIGZ1bmN0aW9uIHByb2Nlc3NCeXRlKGJ5dGUpIHsKICAgICAgICAvLyBFc3RhZG8gMDogRXNwZXJhbmRvIGNhcmFjdGVyZXMgZGUgY2FiZWNlcmEKICAgICAgICBpZiAocnhTdGF0ZSA9PT0gMCkgewogICAgICAgICAgICBjb25zdCBjaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlKTsKICAgICAgICAgICAgLy8gRmlsdHJhbW9zIHJ1aWRvIGJhc3VyYSAoc29sbyBhY2VwdGFtb3MgQVNDSUkgaW1wcmltaWJsZSkKICAgICAgICAgICAgaWYgKGJ5dGUgPiAzMSAmJiBieXRlIDwgMTI3KSB7CiAgICAgICAgICAgICAgICBkZXRlY3RlZE5hbWUgKz0gY2hhcjsKICAgICAgICAgICAgICAgIC8vIEZvcm1hdG8gZXNwZXJhZG86IE5PTUJSRXxUQU1Bw5FPfAogICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBkZXRlY3RlZE5hbWUuc3BsaXQoJ3wnKTsKICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPj0gMykgewogICAgICAgICAgICAgICAgICAgIC8vIENhYmVjZXJhIGNvbXBsZXRhIGRldGVjdGFkYQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZOYW1lID0gcGFydHNbMF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZlNpemUgPSBwYXJzZUludChwYXJ0c1sxXSk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgKGZOYW1lICYmIGZTaXplID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2coJ3J4TG9nJywgYERFVEVDVEFETzogJHtmTmFtZX0gKCR7ZlNpemV9IGJ5dGVzKWApOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGJsRmlsZU5hbWUnKS5pbm5lclRleHQgPSBmTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xibEZpbGVTaXplJykuaW5uZXJUZXh0ID0gZlNpemU7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlSW5mbycpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQUxPQ0FSIE1FTU9SSUEgRklOQUwgKEV2aXRhIGVsIGNyYXNoKQogICAgICAgICAgICAgICAgICAgICAgICByeEJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGZTaXplKTsKICAgICAgICAgICAgICAgICAgICAgICAgcnhJbmRleCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJ4U3RhdGUgPSAxOyAvLyBQYXNhciBhIG1vZG8gZGF0b3MKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IAogICAgICAgIC8vIEVzdGFkbyAxOiBSZWNpYmllbmRvIGN1ZXJwbyBkZWwgYXJjaGl2bwogICAgICAgIGVsc2UgaWYgKHJ4U3RhdGUgPT09IDEpIHsKICAgICAgICAgICAgaWYgKHJ4SW5kZXggPCByeEJ1ZmZlci5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHJ4QnVmZmVyW3J4SW5kZXhdID0gYnl0ZTsKICAgICAgICAgICAgICAgIHJ4SW5kZXgrKzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQWN0dWFsaXphciBiYXJyYSBjYWRhIDElCiAgICAgICAgICAgICAgICBpZiAocnhJbmRleCAlIE1hdGguY2VpbChyeEJ1ZmZlci5sZW5ndGgvMTAwKSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBjdCA9IChyeEluZGV4IC8gcnhCdWZmZXIubGVuZ3RoKSAqIDEwMDsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncnhCYXInKS5zdHlsZS53aWR0aCA9IHBjdCArICIlIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEZpbmFsaXphZG8/CiAgICAgICAgICAgIGlmIChyeEluZGV4ID49IHJ4QnVmZmVyLmxlbmd0aCkgewogICAgICAgICAgICAgICAgcnhTdGF0ZSA9IDI7IC8vIERvbmUKICAgICAgICAgICAgICAgIGZpbmlzaERvd25sb2FkKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGZpbmlzaERvd25sb2FkKCkgewogICAgICAgIGxvZygncnhMb2cnLCAiRGVzY2FyZ2EgQ09NUExFVEEuIEdlbmVyYW5kbyBhcmNoaXZvLi4uIik7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3J4U3RhdHVzJykuaW5uZXJUZXh0ID0gIkZpbmFsaXphZG8iOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyeEJhcicpLnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgICAgIAogICAgICAgIC8vIENyZWFyIEJsb2IgZGVzZGUgZWwgQnVmZmVyIGJpbmFyaW8KICAgICAgICBjb25zdCBwYXJ0cyA9IGRldGVjdGVkTmFtZS5zcGxpdCgnfCcpOwogICAgICAgIGNvbnN0IGZpbGVOYW1lID0gcGFydHNbMF0gfHwgImFyY2hpdm9fcmVjaWJpZG8uYmluIjsKICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3J4QnVmZmVyXSwgeyB0eXBlOiAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIiB9KTsKICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIAogICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgbGluay5ocmVmID0gdXJsOwogICAgICAgIGxpbmsuZG93bmxvYWQgPSBmaWxlTmFtZTsKICAgICAgICBsaW5rLmlubmVySFRNTCA9IGA8YnV0dG9uIHN0eWxlPSJiYWNrZ3JvdW5kOiMwM2RhYzY7IGNvbG9yOmJsYWNrIj7wn5K+IEdVQVJEQVIgJHtmaWxlTmFtZX08L2J1dHRvbj5gOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3dubG9hZEFyZWEnKS5pbm5lckhUTUwgPSAiIjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bmxvYWRBcmVhJykuYXBwZW5kQ2hpbGQobGluayk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RG9taW5hbnRGcmVxKCkgewogICAgICAgIGxldCBtYXhWYWwgPSAwOwogICAgICAgIGxldCBtYXhJZHggPSAwOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YUFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChkYXRhQXJyYXlbaV0gPiBtYXhWYWwpIHsKICAgICAgICAgICAgICAgIG1heFZhbCA9IGRhdGFBcnJheVtpXTsKICAgICAgICAgICAgICAgIG1heElkeCA9IGk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKG1heFZhbCA8IDUwKSByZXR1cm4gMDsgLy8gU2lsZW5jaW8KICAgICAgICByZXR1cm4gbWF4SWR4ICogcnhDdHguc2FtcGxlUmF0ZSAvIGFuYWx5c2VyLmZmdFNpemU7CiAgICB9CgogICAgLy8gVmlzdWFsaXphZG9yIHNpbXBsZQogICAgZnVuY3Rpb24gZHJhd1Zpc3VhbGl6ZXIoKSB7CiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Zpc3VhbGl6ZXInKTsKICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICBjb25zdCB3ID0gY2FudmFzLndpZHRoOwogICAgICAgIGNvbnN0IGggPSBjYW52YXMuaGVpZ2h0OwogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGRyYXcoKSB7CiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3KTsKICAgICAgICAgICAgYW5hbHlzZXIuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEoZGF0YUFycmF5KTsKICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsKICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIHcsIGgpOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgYmFyVyA9ICh3IC8gZGF0YUFycmF5Lmxlbmd0aCkgKiAyLjU7CiAgICAgICAgICAgIGxldCB4ID0gMDsKICAgICAgICAgICAgCiAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPGRhdGFBcnJheS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgdmFsID0gZGF0YUFycmF5W2ldOwogICAgICAgICAgICAgICAgLy8gUGludGFyIGRlIGNvbG9yIHNlZ3VuIHNpIGVzIEZyZXEgMCBvIEZyZXEgMQogICAgICAgICAgICAgICAgY29uc3QgZnJlcSA9IGkgKiByeEN0eC5zYW1wbGVSYXRlIC8gYW5hbHlzZXIuZmZ0U2l6ZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGZyZXEgLSBDRkcuZnJlcV9sb3cpIDwgMTUwKSBjdHguZmlsbFN0eWxlID0gJyNjZjY2NzknOyAvLyBSb2pvICgwKQogICAgICAgICAgICAgICAgZWxzZSBpZiAoTWF0aC5hYnMoZnJlcSAtIENGRy5mcmVxX2hpZ2gpIDwgMTUwKSBjdHguZmlsbFN0eWxlID0gJyMwM2RhYzYnOyAvLyBWZXJkZSAoMSkKICAgICAgICAgICAgICAgIGVsc2UgY3R4LmZpbGxTdHlsZSA9ICcjMzMzJzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgYmFySCA9IHZhbCAvIDI7CiAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoeCwgaCAtIGJhckgsIGJhclcsIGJhckgpOwogICAgICAgICAgICAgICAgeCArPSBiYXJXICsgMTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBkcmF3KCk7CiAgICB9Cjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=
